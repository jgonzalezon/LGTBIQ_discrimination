/* ──────────────────────────────────────────
   src/style.css   –  versión 07-Jun-2025
   ────────────────────────────────────────── */

/* ===== RESET BÁSICO ===== */
:root{
  --bg:#121417;
  --cyan:#00BCD4;
  --cyan-hover:#0097B3;
  --yellow:#ffe46b;
  --card-bg:rgba(255,255,255,.03);
  --focus-shadow:0 0 0 3px rgba(0,170,255,.4);
}

html, body{
  margin:0;
  padding:0;
  height:100%;
  background:var(--bg);
  font-family:'Inter', sans-serif;
  color:#fff;
}

/* ========== CAPAS PRINCIPALES ========== */
#intro          { position:fixed; inset:0; z-index:10; display:flex; justify-content:center; align-items:center; overflow:hidden; }
#form-container { position:fixed; z-index:20; }      /* centrado con transform… (ver más abajo) */
#dashboard      { position:fixed; inset:0; z-index:30; overflow:auto; }

/* ocultar cualquier capa */
.hidden{ display:none!important; z-index:0!important; }

/* ===== INTRO (bandera + botón) ===== */
#intro-image{
  width:100vw!important;
  height:33.33vh!important;
  object-fit:fill!important;
  position:absolute;
  top:50%; left:0;
  transform:translate(-100%, -50%);
  opacity:0;
  transition:transform 1.5s ease-out, opacity 1.5s ease-out;
}
#intro-image.show{
  transform:translate(0, -50%);
  opacity:1;
}

.intro-question{
  position:absolute;
  top:15%;
  left:50%;
  transform:translateX(-50%);
  font-size:2rem;
  color:#fff;
  text-align:center;
  z-index:11;
}

#start-button{
  z-index:11;                         /* sobre la bandera */
  background:var(--cyan);
  color:#000;
  border:none;
  padding:20px 40px;                  /* tamaño original */
  font-size:2rem;
  border-radius:8px;
  cursor:pointer;
  opacity:0;
  text-transform:uppercase;
  letter-spacing:.5px;
  transition:.3s transform, .5s opacity, background-color .25s;
  box-shadow:0 4px 12px rgba(0,0,0,.3);
}
#start-button.show{ opacity:1; }
#start-button:hover{ transform:scale(1.05); background:var(--cyan-hover); }
#start-button.faded{ opacity:0; }

/* ===== FORMULARIO ===== */
#form-container{
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  max-width:800px;
  background:#111;
  border:1px solid #333;
  border-radius:5px;
  padding:20px;
  box-sizing:border-box;
}

fieldset{ border:1px solid #444; padding:15px; margin-bottom:20px; border-radius:4px; }
legend  { padding:0 10px; font-weight:bold; color:#ddd; }
label   { display:block; margin-top:10px; color:#ccc; }

select,
input[type="text"],
input[type="number"],
input[type="email"]{
  width:100%; padding:8px; margin-top:5px;
  border-radius:3px; border:1px solid #555;
  background:#222; color:#fff; box-sizing:border-box;
}

#data-form button[type="submit"]{
  background:#007bff; color:#fff;
  border:none; padding:12px 20px; font-size:1rem;
  border-radius:5px; cursor:pointer; margin-top:10px;
  transition:background-color .3s ease;
}
#data-form button[type="submit"]:hover{ background:#0056b3; }

/* ===== DASHBOARD ===== */
#tabs{
  display:flex; gap:6px; justify-content:center;
  margin:16px 0;
}
#tabs button{
  border:none; padding:8px 16px; font-size:1rem; cursor:pointer;
  background:var(--cyan); color:#000; text-transform:uppercase;
  letter-spacing:.5px; transition:background-color .25s;
}
#tabs button.active{ background:var(--yellow); }
#tabs button:not(.active):hover{ background:var(--cyan-hover); }

/* mapa GRANDE (+ espacio arriba para tabs) */
#viz-container{
  max-width:1140px; margin:0 auto; padding:0 1rem 8rem;
  display:grid; grid-template-columns:repeat(12,1fr); gap:2rem;
}
#viz-container .map{ grid-column:span 12; }
#viz-container .map h3{
  margin:0 0 5px; text-align:center; color:#fff;
  font-size:1.25rem; font-weight:700;
}

#viz-container .charts{ grid-column:span 12; display:flex; flex-wrap:wrap; gap:2rem; }
#viz-container .charts>div.card{ text-align:center; }

.card{
  background:var(--card-bg);
  border-radius:16px;
  padding:1.5rem;
  box-shadow:0 1px 2px rgba(0,0,0,.2);
}

@media (min-width:1024px){
  #viz-container .map{ grid-column:span 8; }
  #viz-container .charts{ grid-column:span 4; flex-direction:column; }
}
.donuts{
  display:flex;
  gap:2rem;
  width:100%;
}
.donuts>div{
  flex:1 1 0;
  max-width:500px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.donuts h4{
  text-align:center;
  margin:0 0 8px;
  font-size:200%;
}
.donuts svg{
  width:100%;
  height:auto;
  margin:auto 0;
}
.donut-label{
  font-size:0.6rem;
  fill:#fff;
  pointer-events:none;
}

.donut-legend{
  list-style:none;
  padding:0;
  margin:.5rem auto 0;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  width:fit-content;
  gap:6px;
  text-align:center;
  font-size:.9rem;
  margin-top:auto;
}
.donut-legend li{ display:flex; align-items:center; }
.donut-legend span{
  width:12px; height:12px; margin-right:4px;
  display:inline-block;
}

button:focus,
select:focus,
input:focus{
  outline:none;
  box-shadow:var(--focus-shadow);
}

.bar-chart{
  max-width:600px;
}
.bar-chart h4{
  text-align:center;
  margin:0 0 8px;
  font-size:200%;
}
.bar-chart svg{
  width:100%;
  height:auto;
}
.bar-chart rect:hover{ opacity:.7; }
.bar-label, .bar-name{
  fill:#fff;
  font-size:.9rem;
}

.subtitle{
  font-size:1rem;
  font-weight:600;
  text-align:center;
  margin:0 0 1rem;
}

.stacked-bars{
  max-width:500px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.stacked-bars h4{
  text-align:center;
  margin:0 0 8px;
  font-size:200%;
}
.stacked-bars svg{
  width:100%;
  height:auto;
  margin:auto 0;
}

.violence-charts{
  display:flex;
  gap:2rem;
  width:100%;
}
.violence-charts>div{
  flex:1 1 0;
  max-width:500px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.violence-charts h4{
  text-align:center;
  margin:0 0 8px;
  font-size:200%;
}
.violence-charts svg{
  width:100%;
  height:auto;
  margin:auto 0;
}

/* leyenda */
#map-legend{
  width:50%; height:14px; margin:10px auto 0;
  display:block; border:1px solid #fff;
}
#legend-labels{
  width:50%; margin:4px auto 30px;
  display:flex; justify-content:space-between;
  font-size:12px; color:#fff;
}

/* botón “Volver al cuestionario” */
#back-btn{
  display:none;
  position:fixed; right:1rem; bottom:1rem; transform:none;
  padding:8px 14px;
  font-size:1rem;
  background:var(--cyan); color:#000;
  border:none; border-radius:4px; cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,.4);
  z-index:1100;
}
#back-btn:hover{ filter:brightness(1.1); }

/* ==== RESPONSIVE ==== */
@media (max-width:768px){
  #viz-container{ grid-template-columns:repeat(12,1fr); }
  #viz-container .map{ grid-column:span 12; height:525px; }
  #viz-container .charts{ grid-column:span 12; flex-direction:column; }
  #map-legend, #legend-labels{ width:90%!important; }
}

@media (max-width:480px){
  .donuts{ display:block; }
  .donuts svg{ max-width:200px; }
  #viz-container .map h3{ text-wrap:balance; }
}

/* ===== FOOTER ===== */
#page-footer{
  position:fixed;
  left:0; right:0; bottom:0;
  width:auto;
  box-sizing:border-box;
  text-align:center;
  margin:0; padding:10px 100px 10px 0;
  font-size:1.35rem; /* 75% del tamaño anterior */
  color:#fff;
  background:gray;
  opacity:0.9;
  z-index:1000;                 /* por delante de los gráficos */
}
#page-footer a{ color:#ccc; }
